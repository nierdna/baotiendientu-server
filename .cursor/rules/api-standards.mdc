# API Standards - BÃ¡o Tiá»n Äiá»‡n Tá»­

## ğŸ Snake Case Convention

### **Báº®T BUá»˜C**: Táº¥t cáº£ API keys pháº£i dÃ¹ng snake_case

#### âœ… **Correct Examples:**
```json
{
  "user_id": "123",
  "created_at": "2023-06-15T10:30:00Z",
  "updated_at": "2023-06-15T10:30:00Z",
  "deleted_at": null,
  "user_name": "John Doe",
  "email": "john@example.com",
  "avatar_url": "https://example.com/avatar.jpg",
  "status_code": 200,
  "total_items": 100,
  "total_pages": 10
}
```

#### âŒ **Wrong Examples:**
```json
{
  "userId": "123",           // âŒ camelCase
  "createdAt": "2023-06-15", // âŒ camelCase
  "userName": "John",        // âŒ camelCase
  "avatarUrl": "https://...", // âŒ camelCase
  "statusCode": 200,         // âŒ camelCase
  "totalItems": 100          // âŒ camelCase
}
```

## ğŸ”§ Implementation

### **Response Interceptor**
- **File**: `src/shared/interceptors/snake-case.interceptor.ts`
- **Chá»©c nÄƒng**: Tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i toÃ n bá»™ response sang snake_case
- **Ãp dá»¥ng**: ToÃ n bá»™ API responses

### **Request Pipe**
- **File**: `src/shared/pipes/snake-case-request.pipe.ts`
- **Chá»©c nÄƒng**: Tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i toÃ n bá»™ request sang snake_case
- **Ãp dá»¥ng**: ToÃ n bá»™ API requests

### **DTO Properties**
- Äáº·t tÃªn property trong DTO theo snake_case
- VÃ­ dá»¥: `user_name`, `created_at`, `updated_at`

## ğŸ“ Code Examples

### **DTO Definition**
```typescript
export class CreateUserDto {
  @ApiProperty({ example: 'john_doe' })
  user_name: string; // âœ… snake_case

  @ApiProperty({ example: 'john@example.com' })
  email: string;

  @ApiProperty({ example: 'password123' })
  password: string;
}

export class UserResponseDto {
  @ApiProperty({ description: 'User ID' })
  id: string;

  @ApiProperty({ description: 'User name' })
  user_name: string; // âœ… snake_case

  @ApiProperty({ description: 'Email address' })
  email: string;

  @ApiProperty({ description: 'Avatar URL' })
  avatar_url: string; // âœ… snake_case

  @ApiProperty({ description: 'Created timestamp' })
  created_at: Date; // âœ… snake_case

  @ApiProperty({ description: 'Updated timestamp' })
  updated_at: Date; // âœ… snake_case
}
```

### **Entity Properties**
```typescript
@Entity('users')
export class UserEntity extends BaseEntity {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column({ name: 'user_name' }) // âœ… snake_case
  user_name: string;

  @Column({ name: 'email' })
  email: string;

  @Column({ name: 'avatar_url' }) // âœ… snake_case
  avatar_url: string;

  @CreateDateColumn({ name: 'created_at' }) // âœ… snake_case
  created_at: Date;

  @UpdateDateColumn({ name: 'updated_at' }) // âœ… snake_case
  updated_at: Date;
}
```

## ğŸš€ Benefits

1. **Consistency**: ToÃ n bá»™ API Ä‘á»“ng nháº¥t snake_case
2. **Frontend Integration**: Dá»… dÃ ng tÃ­ch há»£p vá»›i frontend/mobile
3. **Documentation**: Swagger docs tá»± Ä‘á»™ng hiá»ƒn thá»‹ snake_case
4. **Maintenance**: Dá»… maintain vÃ  debug
5. **Standards**: TuÃ¢n thá»§ chuáº©n API quá»‘c táº¿

## âš ï¸ Important Notes

- **KhÃ´ng Ä‘Æ°á»£c dÃ¹ng camelCase** cho báº¥t ká»³ key nÃ o trong API
- **KhÃ´ng Ä‘Æ°á»£c dÃ¹ng kebab-case** cho key (chá»‰ dÃ¹ng cho endpoint paths)
- **Táº¥t cáº£ DTO properties** pháº£i Ä‘áº·t tÃªn snake_case
- **Táº¥t cáº£ entity columns** pháº£i Ä‘áº·t tÃªn snake_case
- **Interceptor vÃ  Pipe** Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh tá»± Ä‘á»™ng

## ğŸ” Testing

Äá»ƒ test snake_case convention:

```bash
# Test Response (sáº½ tráº£ vá» snake_case)
curl -X GET "http://localhost:8080/users" | jq

# Test Request (cÃ³ thá»ƒ gá»­i camelCase, sáº½ tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i)
curl -X POST "http://localhost:8080/users" \
  -H "Content-Type: application/json" \
  -d '{"userName":"Test","userEmail":"test@example.com"}' | jq
```
description:
globs:
alwaysApply: false
---
